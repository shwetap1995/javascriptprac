<html>
	<head>
	<link rel="stylesheet" type="text/css" href="form.css">
	</head>
<body onload="myFunction()">
    <button type="button" onclick="addFiled()">Add Passenger</button><br>
    <!--<button type="button" onclick="deleteFiled()">delete Passenger</button>-->
    <br>

    <table border="bold" id="tableId">
	<tr>
	<th id="tableHeading" colspan="4"> 
	Passenger Details...
	</th>
	</tr>
        <tr id="columnHeading">
            <th>Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>City</th>
        </tr>

    </table>
    <br>
    <button id="fareButton" type="button" onclick="fare()">Calculate Fare</button>

    <script>
		function myFunction() {
			var x = document.getElementById("tableId").rows.length;
			if(x == 2){
				document.getElementById("fareButton").disabled = true;
			}
		}	
        function addFiled() {
			document.getElementById("fareButton").disabled = false;
            var table = document.getElementById("tableId");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var nameCell = row.insertCell(0);
            var nameInput = document.createElement("input");
            nameInput.type = "text";
            nameCell.appendChild(nameInput);

            var ageCell = row.insertCell(1);
            var ageInput = document.createElement("input");
            ageInput.type = "number";
            ageCell.appendChild(ageInput);

            var genderCell = row.insertCell(2);
            var genderSelect = document.createElement("select");

            option = document.createElement("option");
            option.setAttribute("value", "select");
            option.innerHTML = "Select";
            genderSelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "male");
            option.innerHTML = "Male";
            genderSelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "female");
            option.innerHTML = "Female";
            genderSelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "other");
            option.innerHTML = "Other";
            genderSelect.appendChild(option);
            genderCell.appendChild(genderSelect);

            var cityCell = row.insertCell(3);
            var citySelect = document.createElement("select");

            option = document.createElement("option");
            option.setAttribute("value", "0");
            option.innerHTML = "Select";
            citySelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "100");
            option.innerHTML = "Mumbai";
            citySelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "200");
            option.innerHTML = "Pune";
            citySelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "300");
            option.innerHTML = "Hyderabad";
            citySelect.appendChild(option);

            option = document.createElement("option");
            option.setAttribute("value", "400");
            option.innerHTML = "Bangalore";
            citySelect.appendChild(option);
            cityCell.appendChild(citySelect);

        }

        function fare() {
		 
			var totalFare = 0;
            var tbl = document.getElementById("tableId");
            for (var i = 2; i < tbl.rows.length; i++) {
                
                var row = tbl.rows[i];
                var destCell = row.cells[3];
                var genderCell = row.cells[2];
                var ageCell = row.cells[1];
                var destChild = destCell.children;
                var genderChild = genderCell.children;
                var ageChild = ageCell.children;
                var destSelect = destChild[0];
                var genderSelect = genderChild[0];
                var ageTextbox = ageChild[0];
                var age = ageTextbox.value;
                var destSelectedIndex = destSelect.selectedIndex;
                var genderSelectedIndex = genderSelect.selectedIndex;
                var destSeletedOption = destSelect.options[destSelectedIndex];
                var genderSeletedOption = genderSelect.options[genderSelectedIndex];
                var fareValue = destSeletedOption.getAttribute("value");
                var gender = genderSeletedOption.getAttribute("value");
                var fare = parseInt(fareValue);
				 if(age <=0){
					alert("age is wrong");
					return false;
					}
                if (age < 3) {
                    fare = 0;
                } else if (3 <= age && age <= 10) {
                    fare = fare / 2;
                } else if (gender == "male") {
                    if (10 <= age && age <= 60) {
                        fare = fare;
                    } else {
                        fare = fare / 2;
                    }
                } else if (gender == "female") {
                    if (10 <= age && age <= 50) {
                        fare = fare;
                    } else {
                        fare = fare / 2;
                    }
                } else alert("invalid choice");
				totalFare = totalFare + fare;
            }
            alert(totalFare);
        }
    </script>
</body>

</html>